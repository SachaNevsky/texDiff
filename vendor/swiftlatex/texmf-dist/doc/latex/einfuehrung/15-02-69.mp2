%% 
%%  Ein Beispiel der DANTE-Edition
%%  
%%  1. Auflage
%% 
%%  Beispiel 15-02-69 auf Seite 773.
%% 
%%  Copyright (C) 2011 Herbert Voss
%% 
%%  It may be distributed and/or modified under the conditions
%%  of the LaTeX Project Public License, either version 1.3
%%  of this license or (at your option) any later version.
%% 
%%  See http://www.latex-project.org/lppl.txt for details.
%% 
%% 
%% ==== 
verbatimtex
%% 
\documentclass[]{article}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage{graphicx}
\def\XeTeX{X\raisebox{-0.5ex}{E}\kern-0.125em\TeX}
%\DeclareRobustCommand\XeTeX{X\kern-0.5em\raisebox{-0.5ex}{\reflectbox{E}}\kern0.27em\TeX}
\begin{document}
etex
% --- start of displayed preamble in the book ---
input piechartmp;
% --- end of displayed preamble in the book ---
beginfig(1)
vardef PrivatePattern (expr ulc, lrc, spc, lwd) = save pic, cntr, c, k ;
  picture pic; pic := nullpicture; pair cntr ; numeric c ; path k ;
  cntr := 0.5*(lrc + ulc);
  c := ((xpart (ulc - cntr))++(ypart (ulc - cntr)))/spc;  c := floor c;
  for i=1 upto c:
    k := fullcircle scaled (i*2*spc) shifted cntr ;
    addto pic doublepath k withpen pencircle scaled lwd ;
  endfor;
  pic
enddef;
DefinePattern(1, 0, blue, red, (5mm, 3mm));
DefinePattern(2, 0, auto, white, (3mm, 1pt));
Segment(32.5, "", 1); Segment(12.8, "", auto);
Segment(22.4, "", 2); Segment(18.2, "", red);
PieChart(4cm, 0.1, 65, 0, 0);
endfig;
end;
\end{document}
